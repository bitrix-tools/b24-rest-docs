# Добавить шаблон бизнес-процесса bizproc.workflow.template.add

> Scope: [`bizproc`](../../scopes/permissions.md)
>
> Кто может выполнять метод: администратор

Метод добавляет шаблон бизнес-процесса из файла. 

Шаблон бизнес-процесса нужно предварительно настроить. Готовый шаблон [экспортируйте](https://helpdesk.bitrix24.ru/open/5435897/) в файл с расширением `.bpt`. Полученный файл можно добавить в качестве шаблона на нужный Битрикс24.

Метод работает только в контексте [приложения](../../app-installation/index.md). Система привязывает новый шаблон к приложению.

## Параметры метода

{% include [Сноска об обязательных параметрах](../../../_includes/required.md) %}

#|
|| **Название**
`тип` | **Описание**||
|| **DOCUMENT_TYPE***
[`array`](../../data-types.md) | Тип документа. Состоит из трех элементов типа строка. Они определяют, к какому типу объектов прикрепить новый шаблон бизнес-процесса.

Возможные варианты значений:

- Модуль CRM
    `['crm', 'CCrmDocumentLead', 'LEAD']` — лиды
    `['crm', 'CCrmDocumentContact', 'CONTACT']` — контакты
    `['crm', 'CCrmDocumentCompany', 'COMPANY']` — компании
    `['crm', 'CCrmDocumentDeal', 'DEAL']` — сделки
    `['crm', 'Bitrix\Crm\Integration\BizProc\Document\Quote', 'QUOTE']` — коммерческие предложения
    `['crm', 'Bitrix\Crm\Integration\BizProc\Document\SmartInvoice', 'SMART_INVOICE']` — счета
    `['crm', 'Bitrix\Crm\Integration\BizProc\Document\Dynamic', 'DYNAMIC_XXX']` — смарт-процессы, где XXX — идентификатор смарт-процесса

- Модуль Списки
    `['lists', 'BizprocDocument', 'iblock_XXX']` — процессы в ленте новостей, где XXX — идентификатор информационного блока
    `['lists', 'Bitrix\Lists\BizprocDocumentLists', 'iblock_XXX']` — списки в группах, где XXX — идентификатор информационного блока

- Модуль Диск
    `['disk', 'Bitrix\Disk\BizProcDocument', 'STORAGE_XXX']`, где XXX — идентификатор хранилища
||
|| **NAME***
[`string`](../../data-types.md) | Название шаблона ||
|| **DESCRIPTION**
[`string`](../../data-types.md) | Описание шаблона ||
|| **TEMPLATE_DATA***
[`file`](../../data-types.md) | Контент файла с шаблоном бизнес-процесса в формате `.bpt`.

Подробнее о способах передачи файлов — в статье [{#T}](../../bx24-js-sdk/how-to-call-rest-methods/files.md) ||
|| **AUTO_EXECUTE**
[`integer`](../../data-types.md) | Настройки автозапуска шаблона. Может иметь значение:

- `0` — без автозапуска
- `1` — запуск на создание
- `2` — запуск на изменение
- `3` — запуск на создание и изменение

По умолчанию — `0` ||
|#

## Примеры кода

{% include [Сноска о примерах](../../../_includes/examples.md) %}

{% list tabs %}

- cURL (OAuth)

    ```bash
    curl -X POST \
    -H "Content-Type: application/json" \
    -H "Accept: application/json" \
    -d '{"DOCUMENT_TYPE":["lists","BizprocDocument","iblock_164"],"NAME":"App template","DESCRIPTION":"Template was generated by rest application.","AUTO_EXECUTE":3,"TEMPLATE_DATA":["bp-379.bpt","eNrlWNtO41YUfe9XRH5vlTiJhxj1IYkdYTU3Jeb2ZBkwg1UHU9t0BiFLhKk6rTq9aNSHqupF7RcwU1JSIOEXjv+oex/biZ04YWagIKYvcE7Ots9ea9+t8hx/aPOPeGZFbLWlRp1Z1Hl20eYXeEYWa81qURaZRZXP8Ic6n4ZFHsVzcHiwpzEgx3I809Y+29d2HV01Vk3r023DfFLcdPTPdecAJUC4rnaoML5U6+wZqkO3BZ6hgrDdwn2GZ9bp/zTPNC1zT7McXbPxehZvzcPTumPQRzkQIb+TodclF6RHTsmQvCYn3jGsL7wXZOB9Q/5JkVekT87IgPS87ofkyjsC+S9x43VH12hWR7dt3dzFaxbwGtBCwE2aP3TpToztWrFdO7aTY7vl2G41tlsLd65LaSnv6MaWpe3O5xovNDfrmlPTbFt9rM2gmYV1MZ9Oc2llocCxBYUrsByr5Atsnn073qlzZOA8uFDWnjpUMov8vwRGe+TS+z4FRhiSc3Likw/rHp86/Lh9YDtah6+bT6rmpmq4H0SeAMP1YPOa/j2JS4PgnyB27j3zvgajwutPqW2jYgIo7/qqjLSrmFZHpfqBdvQsPzpbtjWrYpmdCMHgRTyj7js7psUsurE3obRszpGN+mIW6CZ/AOgheQUK94CAPukhQnC3jyjQY9IPdRW3dMe0ymanAyEz0nXaC3znQPegZim2ijVRhhgduxGYcaXYkoqlqhj/tdyot+ViXY46JygsNMrLNbEuKxVJrAr0kE2jgVmekajLFwKHCx0pU8CTlPctDbJLhIZmCNwtdEsApftQUNOKbjiapW4gNxt8xo96BB3+lPZ/akHS0C10wNFPtX3D0ffGUkg5+mn0sZJqa9MXQ/4CRuHRp8xindoSo1GqicBDramsJYHLodl+9B0rRRMFBejbDz10PmrQZQt80NEDqt4EeubWoE/cnoi/1hAkMLWglNaT8GM2IT8jwgn0E0BhuQ/hcA8gIzcnAhSgOCnllhjUqCkDsxEDYzQCSEgk74V5QR0f+CzrYugG1o1Cv6Ft03diW8w6pWqj/ImSnJYwciEtgdcOvC8gyR6BFU+gsvcB54CWn7/IEKt/UJVulq8SrJq59XwFjxbLsrSS6MhZECc/QD2EMgIVc4Btj3fsvbjOh2G5YZrG/URuePO070JYlppKc7lUldpLYqKFWQzd36Ble0at2Acr0gYvyYFnQ0zfG8RMaE6l0mrUkhDmC9HqM4DFc2yfcHMyaWnSf9jZqjBiQ24kccHlo1wMqbEHlA8/Vb9/jICi7UZLTnQM7Kx/AqCntAXu+n3kEWLGAQY4OL8e/c1T3O23ZIgReljaVGcnqxW8l/wKdj7zoxwb6P8gQUcYggttx9J3HwfM2abl4OybCUDZmuPA6Xj6xN69vdRYVYqCoFQarVpscsoFh6IgyROn7gRrqBsmCP8XxRnnE58eP0MK2rYK2q+oxr4WmWgm6I6hmE5DEFfNlrgiiatKUyrLy63E8pLnqMed0fkFhjHy92iGASe8wAC8onPbaTBDd8HvhlCAjpIqzrZuaPeTjsObEytOyIMsrskzpwF/6oT88i7AnXA2vnPg4c3TwB/FgSvyetMPwPSkD2Qp/D65StGPKJQFzMZvyQM6pGZom6E+jT1HN3fHUTTB05jx4D07TscIlkt06d45oZMQRpTiJa4f64IoF6XqvKDKLbxRUD3AYMqM4M+KpSw3M5YeYAxxMbyzQyiXvz6E/uehk8NvU0LyjIMJ6Bf6AeKSjnF9aAB7QBd0O/gpF3vCU2ZODb/jRmd+5YXTtVp1xvjKItSX9LP0VzQlUHgX3nfe8wcC0HX/BTDK1SA="],"auth":"**put_access_token_here**"}' \
    https://**put_your_bitrix24_address**/rest/bizproc.workflow.template.add
    ```

- JS

    ```js
    BX24.callMethod(
        'bizproc.workflow.template.add',
        {
            DOCUMENT_TYPE: ['lists', 'BizprocDocument', 'iblock_164'],
            NAME: 'App template',
            DESCRIPTION: 'Template was generated by rest application.',
            AUTO_EXECUTE: 3,
            TEMPLATE_DATA: [
                    "bp-379.bpt",
                    "eNrlWNtO41YUfe9XRH5vlTiJhxj1IYkdYTU3Jeb2ZBkwg1UHU9t0BiFLhKk6rTq9aNSHqupF7RcwU1JSIOEXjv+oex/biZ04YWagIKYvcE7Ots9ea9+t8hx/aPOPeGZFbLWlRp1Z1Hl20eYXeEYWa81qURaZRZXP8Ic6n4ZFHsVzcHiwpzEgx3I809Y+29d2HV01Vk3r023DfFLcdPTPdecAJUC4rnaoML5U6+wZqkO3BZ6hgrDdwn2GZ9bp/zTPNC1zT7McXbPxehZvzcPTumPQRzkQIb+TodclF6RHTsmQvCYn3jGsL7wXZOB9Q/5JkVekT87IgPS87ofkyjsC+S9x43VH12hWR7dt3dzFaxbwGtBCwE2aP3TpToztWrFdO7aTY7vl2G41tlsLd65LaSnv6MaWpe3O5xovNDfrmlPTbFt9rM2gmYV1MZ9Oc2llocCxBYUrsByr5Atsnn073qlzZOA8uFDWnjpUMov8vwRGe+TS+z4FRhiSc3Likw/rHp86/Lh9YDtah6+bT6rmpmq4H0SeAMP1YPOa/j2JS4PgnyB27j3zvgajwutPqW2jYgIo7/qqjLSrmFZHpfqBdvQsPzpbtjWrYpmdCMHgRTyj7js7psUsurE3obRszpGN+mIW6CZ/AOgheQUK94CAPukhQnC3jyjQY9IPdRW3dMe0ymanAyEz0nXaC3znQPegZim2ijVRhhgduxGYcaXYkoqlqhj/tdyot+ViXY46JygsNMrLNbEuKxVJrAr0kE2jgVmekajLFwKHCx0pU8CTlPctDbJLhIZmCNwtdEsApftQUNOKbjiapW4gNxt8xo96BB3+lPZ/akHS0C10wNFPtX3D0ffGUkg5+mn0sZJqa9MXQ/4CRuHRp8xindoSo1GqicBDramsJYHLodl+9B0rRRMFBejbDz10PmrQZQt80NEDqt4EeubWoE/cnoi/1hAkMLWglNaT8GM2IT8jwgn0E0BhuQ/hcA8gIzcnAhSgOCnllhjUqCkDsxEDYzQCSEgk74V5QR0f+CzrYugG1o1Cv6Ft03diW8w6pWqj/ImSnJYwciEtgdcOvC8gyR6BFU+gsvcB54CWn7/IEKt/UJVulq8SrJq59XwFjxbLsrSS6MhZECc/QD2EMgIVc4Btj3fsvbjOh2G5YZrG/URuePO070JYlppKc7lUldpLYqKFWQzd36Ble0at2Acr0gYvyYFnQ0zfG8RMaE6l0mrUkhDmC9HqM4DFc2yfcHMyaWnSf9jZqjBiQ24kccHlo1wMqbEHlA8/Vb9/jICi7UZLTnQM7Kx/AqCntAXu+n3kEWLGAQY4OL8e/c1T3O23ZIgReljaVGcnqxW8l/wKdj7zoxwb6P8gQUcYggttx9J3HwfM2abl4OybCUDZmuPA6Xj6xN69vdRYVYqCoFQarVpscsoFh6IgyROn7gRrqBsmCP8XxRnnE58eP0MK2rYK2q+oxr4WmWgm6I6hmE5DEFfNlrgiiatKUyrLy63E8pLnqMed0fkFhjHy92iGASe8wAC8onPbaTBDd8HvhlCAjpIqzrZuaPeTjsObEytOyIMsrskzpwF/6oT88i7AnXA2vnPg4c3TwB/FgSvyetMPwPSkD2Qp/D65StGPKJQFzMZvyQM6pGZom6E+jT1HN3fHUTTB05jx4D07TscIlkt06d45oZMQRpTiJa4f64IoF6XqvKDKLbxRUD3AYMqM4M+KpSw3M5YeYAxxMbyzQyiXvz6E/uehk8NvU0LyjIMJ6Bf6AeKSjnF9aAB7QBd0O/gpF3vCU2ZODb/jRmd+5YXTtVp1xvjKItSX9LP0VzQlUHgX3nfe8wcC0HX/BTDK1SA="
                ]
        },
        function(result)
        {
            if(result.error())
                alert("Error: " + result.error());
            else
                console.log(result.data());
        }
    );
	```

- PHP

    ```php
    require_once('crest.php');

    $result = CRest::call(
        'bizproc.workflow.template.add',
        [
            'DOCUMENT_TYPE' => ['lists', 'BizprocDocument', 'iblock_164'],
            'NAME' => 'App template',
            'DESCRIPTION' => 'Template was generated by rest application.',
            'AUTO_EXECUTE' => 3,
            'TEMPLATE_DATA' => [
                "bp-379.bpt",
                "eNrlWNtO41YUfe9XRH5vlTiJhxj1IYkdYTU3Jeb2ZBkwg1UHU9t0BiFLhKk6rTq9aNSHqupF7RcwU1JSIOEXjv+oex/biZ04YWagIKYvcE7Ots9ea9+t8hx/aPOPeGZFbLWlRp1Z1Hl20eYXeEYWa81qURaZRZXP8Ic6n4ZFHsVzcHiwpzEgx3I809Y+29d2HV01Vk3r023DfFLcdPTPdecAJUC4rnaoML5U6+wZqkO3BZ6hgrDdwn2GZ9bp/zTPNC1zT7McXbPxehZvzcPTumPQRzkQIb+TodclF6RHTsmQvCYn3jGsL7wXZOB9Q/5JkVekT87IgPS87ofkyjsC+S9x43VH12hWR7dt3dzFaxbwGtBCwE2aP3TpToztWrFdO7aTY7vl2G41tlsLd65LaSnv6MaWpe3O5xovNDfrmlPTbFt9rM2gmYV1MZ9Oc2llocCxBYUrsByr5Atsnn073qlzZOA8uFDWnjpUMov8vwRGe+TS+z4FRhiSc3Likw/rHp86/Lh9YDtah6+bT6rmpmq4H0SeAMP1YPOa/j2JS4PgnyB27j3zvgajwutPqW2jYgIo7/qqjLSrmFZHpfqBdvQsPzpbtjWrYpmdCMHgRTyj7js7psUsurE3obRszpGN+mIW6CZ/AOgheQUK94CAPukhQnC3jyjQY9IPdRW3dMe0ymanAyEz0nXaC3znQPegZim2ijVRhhgduxGYcaXYkoqlqhj/tdyot+ViXY46JygsNMrLNbEuKxVJrAr0kE2jgVmekajLFwKHCx0pU8CTlPctDbJLhIZmCNwtdEsApftQUNOKbjiapW4gNxt8xo96BB3+lPZ/akHS0C10wNFPtX3D0ffGUkg5+mn0sZJqa9MXQ/4CRuHRp8xindoSo1GqicBDramsJYHLodl+9B0rRRMFBejbDz10PmrQZQt80NEDqt4EeubWoE/cnoi/1hAkMLWglNaT8GM2IT8jwgn0E0BhuQ/hcA8gIzcnAhSgOCnllhjUqCkDsxEDYzQCSEgk74V5QR0f+CzrYugG1o1Cv6Ft03diW8w6pWqj/ImSnJYwciEtgdcOvC8gyR6BFU+gsvcB54CWn7/IEKt/UJVulq8SrJq59XwFjxbLsrSS6MhZECc/QD2EMgIVc4Btj3fsvbjOh2G5YZrG/URuePO070JYlppKc7lUldpLYqKFWQzd36Ble0at2Acr0gYvyYFnQ0zfG8RMaE6l0mrUkhDmC9HqM4DFc2yfcHMyaWnSf9jZqjBiQ24kccHlo1wMqbEHlA8/Vb9/jICi7UZLTnQM7Kx/AqCntAXu+n3kEWLGAQY4OL8e/c1T3O23ZIgReljaVGcnqxW8l/wKdj7zoxwb6P8gQUcYggttx9J3HwfM2abl4OybCUDZmuPA6Xj6xN69vdRYVYqCoFQarVpscsoFh6IgyROn7gRrqBsmCP8XxRnnE58eP0MK2rYK2q+oxr4WmWgm6I6hmE5DEFfNlrgiiatKUyrLy63E8pLnqMed0fkFhjHy92iGASe8wAC8onPbaTBDd8HvhlCAjpIqzrZuaPeTjsObEytOyIMsrskzpwF/6oT88i7AnXA2vnPg4c3TwB/FgSvyetMPwPSkD2Qp/D65StGPKJQFzMZvyQM6pGZom6E+jT1HN3fHUTTB05jx4D07TscIlkt06d45oZMQRpTiJa4f64IoF6XqvKDKLbxRUD3AYMqM4M+KpSw3M5YeYAxxMbyzQyiXvz6E/uehk8NvU0LyjIMJ6Bf6AeKSjnF9aAB7QBd0O/gpF3vCU2ZODb/jRmd+5YXTtVp1xvjKItSX9LP0VzQlUHgX3nfe8wcC0HX/BTDK1SA="
            ]
        ]
    );

    echo '<PRE>';
    print_r($result);
    echo '</PRE>';
    ```

{% endlist %}

## Обработка ответа

HTTP-статус: **200**

```json
{
    "result": 525,
    "time": {
        "start": 1737529740.157058,
        "finish": 1737529740.4302571,
        "duration": 0.27319908142089844,
        "processing": 0.25160598754882812,
        "date_start": "2025-01-22T10:09:00+03:00",
        "date_finish": "2025-01-22T10:09:00+03:00",
        "operating_reset_at": 1737530340,
        "operating": 0.25158905982971191
    }
}
```

### Возвращаемые данные

#|
|| **Название**
`тип` | **Описание** ||
|| **result**
[`object`](../../data-types.md) | Идентификатор добавленного шаблона бизнес-процесса ||
|| **time**
[`time`](../../data-types.md#time) | Информация о времени выполнения запроса ||
|#

## Обработка ошибок

HTTP-статус: **400**

```json
{
    "error": "ERROR_TEMPLATE_VALIDATION_FAILURE",
    "error_description": "Incorrect field DOCUMENT_TYPE!",
}
```

{% include notitle [обработка ошибок](../../../_includes/error-info.md) %}

### Возможные коды ошибок

#|
|| **Код** | **Сообщение об ошибке** | **Описание** ||
|| `ACCESS_DENIED` | Application context required | Токен доступа не из приложения ||
|| `ACCESS_DENIED` | Access denied! | Метод запустил не администратор ||
|| `ERROR_TEMPLATE_VALIDATION_FAILURE` | Incorrect field DOCUMENT_TYPE! | Указан неверный тип документа ||
|| `ERROR_TEMPLATE_VALIDATION_FAILURE` | Empty template name! | Не указано название шаблона ||
|| `ERROR_TEMPLATE_VALIDATION_FAILUR` | Incorrect field AUTO_EXECUTE! | Указан неверный код автозапуска ||
|| `ERROR_TEMPLATE_VALIDATION_FAILURE` | Incorrect field TEMPLATE_DATA! | Указаны неверные данные шаблона ||
|#

{% include [системные ошибки](../../../_includes/system-errors.md) %}

## Продолжите изучение 

- [{#T}](./index.md)
- [{#T}](./bizproc-workflow-template-update.md)
- [{#T}](./bizproc-workflow-template-list.md)
- [{#T}](./bizproc-workflow-template-delete.md)