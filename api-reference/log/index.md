# Лента новостей: обзор методов

Лента новостей корпоративного портала напоминает ленты в социальных сетях. Она позволяет сотрудникам быть в курсе событий компании. В ней отображаются новости, сообщения, задачи, опросы, поздравления и многое другое.

> Быстрый переход: [все методы и события](#all-methods)
>
> Пользовательская документация: [Лента новостей](https://helpdesk.bitrix24.ru/section/108537/)

## Связь Ленты с другими объектами

**Пользователи**. Чтобы написать сообщение Ленты новостей конкретным пользователям, нужно знать их `ID`. Список пользователей можно получить методом `user.get`.

**Рабочие группы и проекты**. Сообщение Ленты новостей можно направить участникам рабочих групп и проектов с помощью `ID` рабочих групп и проектов. Список групп доступен через метод `sonet_group.get`.

**Подразделения компании**. Чтобы адресовать сообщение Ленты подразделениям компании, нужно знать `ID` подразделений. Получить список подразделений можно через метод `department.get`.

**Файлы**. К сообщениям в Ленте новостей можно прикреплять файлы из локального хранилища, Диска Битрикс24 или облака. Чтобы прикрепить файл к сообщению, передайте массив из имени файла и строки с `Base64` в поле `Files`. Чтобы получить информацию о прикрепленном файле, используйте метод `disk.attachedObject.get`.

> Частые кейсы и сценарии
>
> - [Как загрузить файлы](../files/how-to-upload-files.md)

**События календаря**. Автоматически отображаются в Ленте новостей. Вы можете создавать и редактировать события календаря с помощью методов группы `calendar.events.*`.

**Задачи**. Автоматически отображаются  в Ленте новостей. Чтобы создавать и редактировать задачи, используйте методы группы `tasks.*`.

**Новые сотрудники**. Пользователей можно создавать с помощью метода `user.add`. Лента новостей автоматически публикует сообщения о принятых на работу сотрудниках, если это разрешено настройками.

> Пользовательская документация
>
> -  [Настройки Битрикс24](https://helpdesk.bitrix24.ru/open/18371844/)

## Запуск бизнес-процессов из Ленты

Бизнес-процессы можно запускать непосредственно из Ленты новостей без перехода в другие разделы.

> Пользовательская документация
>
> - [Бизнес-процессы в Ленте новостей](https://helpdesk.bitrix24.ru/open/1312890/)

Используйте метод `bizproc.workflow.template.list`, чтобы получить список доступных бизнес-процессов и их идентификаторов. Чтобы отфильтровать только бизнес-процессы Ленты новостей, укажите `MODULE_ID: "lists"` и `ENTITY: "BizprocDocument"`.

С помощью метода `bizproc.workflow.start` запустите бизнес-процесс, указав его `ID`. Чтобы связать бизнес-процесс с Лентой новостей, привяжите его к элементу списка. Для работы с элементами списка используйте группу методов `lists.element.*`. Чтобы создать или получить элемент списка, связанного с бизнес-процессом Ленты, укажите `IBLOCK_TYPE_ID: bitrix_processes`. Если бизнес-процесс запущен для элемента списка, Лента новостей автоматически создаст сообщение.

## **Управление сообщениями в Ленте**

**Как добавить, изменить или удалить сообщение**. С помощью методов  вы можете добавлять, изменять и удалять сообщения Ленты новостей. Используйте метод `log.blogpost.add`, чтобы добавить сообщение в Ленту новостей от имени текущего пользователя. Изменить сообщение вы можете с помощью метода `log.blogpost.update`. Для удаления сообщения применяйте метод `log.blogpost.delete`.

**Как управлять комментариями**. Используйте метод `log.blogcomment.add`, чтобы добавлять комментарии к сообщениям и метод `log.blogcomment.delete`, чтобы удалять комментарии. Метод `log.blogcomment.user.get` возвращает комментарии к сообщениям и может фильтровать их по диапазону ID (`FIRST_ID`, `LAST_ID`). Если не передать параметры фильтрации, метод вернет все доступные текущему пользователю комментарии с учетом его прав доступа.

**Как узнать, кто из пользователей прочитал важное сообщение**. Опубликованное в Ленте новостей сообщение можно пометить как важное. Чтобы просмотреть список пользователей, которые прочитали важное сообщение, используйте метод `log.blogpost.getusers.important`. Комбинацию «важное сообщение и отслеживание списка прочитавших» можно использовать для автоматизированных сценариев массового информирования сотрудников.

**Как получить список сообщений**. Получить доступные пользователю сообщения Ленты новостей позволяет метод `log.blogpost.get`.

**Какие события доступны**. События `OnLiveFeedPostAdd`, `OnLiveFeedPostUpdate` и `OnLiveFeedPostDelete` позволяют отслеживать появление, изменение и удаление сообщений.

## Обзор методов и событий {#all-methods}

> Scope: [`log`](../scopes/permissions.md)
> 
> Кто может выполнять метод: любой пользователь

{% list tabs %}

- Методы

    #|
    || **Метод** | **Описание** ||
    || [log.blogcomment.add](./log-blogcomment-add.md) | Добавляет комментарий к сообщению Ленты новостей ||
    || [log.blogpost.add](./log-blogpost-add.md) | Добавляет сообщение в Ленту новостей от имени текущего пользователя ||
    || [log.blogpost.update](./log-blogpost-update.md) | Изменяет сообщение Ленты новостей ||
    || [log.blogpost.get](./log-blogpost-get.md) | Получает доступные пользователю сообщения Ленты новостей ||
    || [log.blogpost.getusers.important](./log-blogpost-getusers-important.md) | Просматривает пользователей, прочитавших важное сообщение ||
    || [log.blogpost.share](./log-blogpost-share.md) | Добавляет получателей в сообщение Ленты новостей ||
    || [log.blogpost.delete](./log-blogpost-delete.md) | Удаляет сообщение Ленты новостей ||
    |#

- События

    #|
    || **Событие** | **Вызывается** ||
    || [OnLiveFeedPostAdd](./events/on-live-feed-post-add.md) | На добавление сообщения в Ленту новостей ||
    || [OnLiveFeedPostDelete](./events/on-live-feed-post-delete.md) | На удаление сообщения из Ленты новостей ||
    || [OnLiveFeedPostUpdate](./events/on-live-feed-post-update.md) | На редактирование сообщения в Ленте новостей ||
    |#

{% endlist %}