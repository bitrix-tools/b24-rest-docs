# Общие рекомендации

Существуют определенные [лимиты](./limits.md) при работе с REST API облачного Битрикс24. В случае [коробочной установки](../cloud-and-on-premise/on-premise/index.md), ограничения зависят от настроек конкретной серверной инфраструктуры, на которой работает Битрикс24, следовательно, лимиты могут отличаться как в большую, так и в меньшую сторону.

Тем не менее, есть ряд общих рекомендаций, соблюдая которые, ваши приложения будут подвержены меньшем рискам попасть в ограничения REST API.

## Запросы к Битрикс24

1. Сокращайте количество запросов к Битрикс24:
   1. Кэшируйте часть данных на своей стороне, чтобы избегать лишних повторяющихся запросов, которые вернут те же данные, что вы уже получали ранее;
   2. Используйте пакетное выполнение запросов с помощью [метода batch](../how-to-call-rest-api/batch.md) (лимит на интенсивность запросов учитывает количество хитов к Битрикс24, а использование batch позволит за один хит вызвать сразу несколько реальных запросов к REST API).
2. Используйте [параметр start=-1](./huge-data.md) при вызове списочных методов - это снижает нагрузку на серверные ресурсы Битрикс24.
3. Старайтесь запрашивать только те данные, которые реально нужны (указывайте список нужных полей в параметре `select` у тех методов, которые его поддерживают).

## Обработка событий и исходящих вебхуков

Как вы знаете, [механизм событий](../events/index.md) в Битрикс24 работает с использованием особого сервиса - очереди событий - который вызывает ваши обработчики.

Нужно учитывать тот факт, что вы никак не можете регулировать интенсивность событий.

Представьте, что ваше приложение зарегистрировало обработчик [OnCRMDealUpdate](../crm/deals/events/on-crm-deal-update.md), а на конкретном Битрикс24 пользователи массово (с помощью [бизнес-процесса](../bizproc/index.md) или автоматизации на базе REST API) обновили 10К сделок. В очереди событий Битрикс24 тут же появятся задачи на отправку 10К уведомлений на ваш обработчик.

Следовательно, ваш обработчик должен быть готов к потенциальной пиковой нагрузке. И отвечать ваш обработчик должен максимально быстро - если очередь событий не получает ответа от вашего обработчика при отправке очередного события или ваш обработчик отвечает медленно, то дальнейшие вызовы будут выполняться с пониженным приоритетом, а следовательно, с более длительными паузами.

И самое главное, если ваш обработчик не справится с такой нагрузкой и ваш сервер "упадёт", то вы просто не получите и не сможете обработать часть отправленных на ваш обработчик событий. Битрикс24 не делает повторной отправки в случае, если обработчик события не ответил вообще или вернул аварийный статус веб-сервера.

Поэтому мы **настоятельно рекомендуем** использовать "[входящую очередь](./queue.md)" для обработки событий. Концепция “входящей очереди” для обработки HTTP-запросов предполагает, что запросы не обрабатываются сразу по мере их поступления, а помещаются в очередь, откуда в дальнейшем они поочередно извлекаются и обрабатываются вашим сервером или даже группой серверов. Это позволяет управлять нагрузкой, повысить стабильность и масштабируемость системы.