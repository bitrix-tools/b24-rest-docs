# При окончании разговора OnVoximplantCallEnd

{% note warning "Мы еще обновляем эту страницу" %}

Тут может не хватать некоторых данных — дополним в ближайшее время

{% endnote %}

{% if build == 'dev' %}

{% note alert "TO-DO _не выгружается на prod_" %}

- не указаны типы параметров
- не указана обязательность параметров
- отсутствуют примеры

{% endnote %}

{% endif %}

{% include notitle [Скоуп telephony events](../../_includes/scope-telephony-events.md) %}

Событие `OnVoximplantCallEnd` вызывается при окончании разговора (запись в историю).

{% note warning %}

Обратите внимание, что событие будет вызвано без данных авторизации.

{% endnote %}

В событие поступает массив с данными:

#|
|| **Параметр** | **Описание** ||
|| **CALL_ID** | Идентификатор звонка. ||
|| **CALL_TYPE** | Тип вызова см. описание типов вызова ||
|| **PHONE_NUMBER** | Номер, с которого звонит абонент (если тип звонка 2 - Входящий) или номер, которому звонит оператор (если тип звонка 1 - Исходящий). ||
|| **PORTAL_NUMBER** | Номер, на который поступил звонок (если тип звонка 2 - Входящий) или номер, с которого был совершен звонок (если тип звонка 1 - Исходящий). ||
|| **PORTAL_USER_ID** | Идентификатор ответившего оператора (если тип звонка 2 - Входящий) или идентификатор позвонившего оператора (если тип звонка 1 - Исходящий). ||
|| **CALL_DURATION** | Длительность звонка. ||
|| **CALL_START_DATE** | Дата в ISO формате. ||
|| **COST** | Стоимость звонка. ||
|| **COST_CURRENCY** | Валюта звонка (RUR, USD, EUR). ||
|| **CALL_FAILED_CODE** | Код вызова см. таблицу кодов вызова ||
|| **CALL_FAILED_REASON** | Текстовое описание кода вызова (латиница). ||
|| **CRM_ACTIVITY_ID** | ID дела CRM, связанного со звонком. ||
|#