# Создать новый документ на основании шаблона documentgenerator.document.add

{% note warning "Мы еще обновляем эту страницу" %}

Тут может не хватать некоторых данных — дополним в ближайшее время

{% endnote %}

{% if build == 'dev' %}

{% note alert "TO-DO _не выгружается на prod_" %}

- нужны правки под стандарт написания
- не указаны типы параметров
- не указана обязательность параметров
- отсутствует ответ в случае ошибки

{% endnote %}

{% endif %}

> Scope: [`documentgenerator`](../scopes/permissions.md)
>
> Кто может выполнять метод: любой пользователь

Метод `documentgenerator.document.add` создает новый документ на основании шаблона. 

#|
|| **Параметр** | **Описание** ||
|| **templateId** | ID шаблона. ||
|| **value** | Внешний идентификатор. Параметр value нужен только для интерфейса приложения, как идентификатор внешнего источника. Это строковый параметр, в него можно передать полноценный внешний код. Например, `"PARTNER_APP_10_BILL_133”`. ||
|| **values** | Набор значений полей документа. В простом случае это одномерный массив, где ключ - название поля, а значение - строка для вставки в документ. ||
|| **stampsEnabled** | 1 (поставить), 0 (убрать) печати и подписи. ||
|| **fields** | Описание полей документа. Данный параметр - массив, где ключ - название поля, а значение - описание. Коды типов простых полей: 
- TYPE — тип поля; 
- FORMAT — формат; 
- PROVIDER — провайдер; 
- TITLE — заголовок; 
- IMAGE — изображение; 
- STAMP — печать / подпись; 
- DATE — дата / время; 
- NAME — имя; 
- PHONE — номер телефона. ||
|#

## Примеры

Здесь можно посмотреть [примеры генерации документа](./examples/index.md).

## Ответ в случае успеха

В случае успешного выполнения в результате придёт структура, аналогичная методу [documentgenerator.document.get()](./document-generator-document-get.md) на новом документе.

## Почему в результате document.add нет ссылки на pdf

Конвертация в **pdf** - операция асинхронная. На момент окончания генерации документа ещё нет pdf-файла.

Если для документа очень нужен pdf, то сейчас единственный вариант - сделать повторный запрос `documentgenerator.document.get` через 20-30 секунд, чтобы считать ссылку на pdf. Если она там не появилась - попробовать повторить.