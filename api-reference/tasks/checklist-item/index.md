# Чек-листы: обзор методов

Чек-лист — это список шагов для задачи. Каждый пункт чек-листа можно выполнить отдельно.

> Быстрый переход: [все методы и события](#all-methods) 
> 
> Пользовательская документация: [чек-листы в задачах](https://helpdesk.bitrix24.ru/open/17657420/)

## Структура чек-листов

Чек-лист в Битрикс24 — это иерархический список с древовидной структурой до трех уровней. Он привязан к задаче `TASK_ID`.

Элементы чек-листа поддерживают вложенность. Поле `PARENT_ID` указывает на родительский элемент. У корневого элемента `PARENT_ID` равен `0`.

Поле `SORT_INDEX` задает позицию элемента. Чем меньше число — тем выше элемент.

Каждый пункт может иметь статус *Выполнен* `IS_COMPLETE = 'Y'` или *Не выполнен* `IS_COMPLETE = 'N'`. При смене статуса система автоматически заполняет поля *Кто сменил* `TOGGLED_BY`  и *Когда сменил* `TOGGLED_DATE`.

Пункт можно отметить как важный `IS_IMPORTANT = 'Y'`.

## Связь чек-листа с другими объектами

**Задача.** Чек-лист привязан к задаче по идентификатору `TASKID`. Получить идентификатор можно методом [создания новой задачи](../tasks-task-add.md) или методом [получения списка задач](../tasks-task-list.md).

**Пользователь.** Пункт чек-листа может иметь связь с пользователями в полях:

-  `TOGGLED_BY` — идентификатор пользователя, который выполнил пункт,

-  `MEMBERS` —  массив с информацией о наблюдателях `"TYPE": "U"` и соисполнителях `"TYPE": "A"` в пункте чек-листа.

**Файлы.** Пункт чек-листа может содержать файлы. Поле `ATTACHMENTS` хранит объекты с описанием каждого файла, включая идентификатор `FILE_ID`. Получить информацию о файле по идентификатору можно методом [disk.file.get](../../disk/file/disk-file-get.md).

{% note tip "Пользовательская документация" %}

- [Задачи Битрикс24](https://helpdesk.bitrix24.ru/open/17962166/)

{% endnote %}

## Перенести пункт чек-листа

Изменить положение пункта можно методом [task.checklistitem.moveafteritem](./task-checklist-item-move-after-item.md). Метод перемещает элемент `itemId` в позицию после элемента `afterItemId`. Оба элемента должны быть в одной задаче `taskId`. Элементы могут быть в разных подсписках, но после перемещения `itemId` получит тот же `PARENT_ID`, что и `afterItemId`.

**Пример.** Поместим пункт с `ID=453` после пункта с `ID=447`.

```plaintext
ДО:                                            ПОСЛЕ:
Чек-лист 1 (431)                               Чек-лист 1 (431)
├── первый пункт (433)                         ├── первый пункт (433)
│   ├── подпункт 1 (435)                       │   ├── подпункт 1 (435)
│   ├── подпункт 2 (445)                       │   └── подпункт 2 (445)
│   └── подпункт 3 (453) ← PARENT_ID=433       ├── второй пункт (447)
├── второй пункт (447)                         ├── подпункт 3 (453) ← PARENT_ID=431
└── третий пункт (449)                         └── третий пункт (449)
```

## Выполнить пункт чек-листа

Метод [task.checklistitem.complete](./task-checklist-item-complete.md) отмечает элемент чек-листа как выполненный. Система устанавливает значение `'Y'` в поле `IS_COMPLETE` и автоматически заполняет поля:

-  `TOGGLED_BY` — идентификатор пользователя, который сменил статус пункта,

-  `TOGGLED_DATE` — текущие дата и время, когда пользователь сменил пункт.

Метод [task.checklistitem.renew](./task-checklist-item-renew.md) возвращает пункт чек-листа в работу. Система устанавливает значение `'N'` в поле `IS_COMPLETE` и обновляет поля `TOGGLED_BY` и `TOGGLED_DATE`.

## Кто может добавлять или менять запись

Чтобы добавить, изменить или удалить пункт чек-листа, нужны права доступа. Проверить права можно методом [task.checklistitem.isactionallowed](./task-checklist-item-is-action-allowed.md).

## Справочная информация о методах

Узнать актуальную информацию о методах работы с чек-листами в задачах вы можете с помощью метода [task.checklistitem.getmanifest](./task-checklist-item-get-manifest.md). Рекомендуем использовать его только в качестве справочника, так как структуру ответа метода разработчик может изменить в любой момент.

## Обзор методов {#all-methods}

> Scope: [`task`](../../scopes/permissions.md)
>
> Кто может выполнять метод: в зависимости от метода

#|
|| **Метод** | **Описание** ||
|| [task.checklistitem.add](./task-checklist-item-add.md) | Добавляет новый элемент чек-листа к задаче ||
|| [task.checklistitem.update](./task-checklist-item-update.md) | Обновляет элемент чек-листа ||
|| [task.checklistitem.get](./task-checklist-item-get.md) | Получает элемент чек-листа по `id` ||
|| [task.checklistitem.getlist](./task-checklist-item-get-list.md) | Получает список элементов чек-листа в задаче ||
|| [task.checklistitem.delete](./task-checklist-item-delete.md) | Удаляет элемент чек-листа ||
|| [task.checklistitem.moveafteritem](./task-checklist-item-move-after-item.md) | Помещает элемент чек-листа в списке после указанного ||
|| [task.checklistitem.complete](./task-checklist-item-complete.md) | Отмечает элемент чек-листа как выполненный ||
|| [task.checklistitem.renew](./task-checklist-item-renew.md) | Отмечает выполненный элемент чек-листа как невыполненный ||
|| [task.checklistitem.isactionallowed](./task-checklist-item-is-action-allowed.md) | Проверяет, разрешено ли действие для элемента чек-листа ||
|| [task.checklistitem.getmanifest](./task-checklist-item-get-manifest.md) | Получает список методов и их описание ||
|#