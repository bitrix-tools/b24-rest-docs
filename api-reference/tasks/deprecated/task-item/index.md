# Методы для работы с задачами (item)

> Scope: [`task`](../../../scopes/permissions.md)
>
> Кто может выполнять метод: любой пользователь

Работа с PHP-классом `CTaskItem`. Вместо `item` можно также использовать его синоним `ctaskitem`.

## Допустимые поля

#|
|| **Название** | **Описание** | **Чтение** | **Запись** | **Сортировка** | **Фильтрация** ||
|| TITLE | Название задачи | + | + | + | + ||
|| DESCRIPTION | Описание задачи | + | + | | ||
|| DEADLINE | Крайний срок | + | + | + | ||
|| START_DATE_PLAN | Плановая дата начала | + | + | + | + ||
|| END_DATE_PLAN | Плановая дата завершения | + | + | | + ||
|| PRIORITY | Приоритет | + | + | + | + ||
|| ACCOMPLICES | Соисполнители (идентификаторы пользователей) | + | + | | ||
|| ACCOMPLICE | Соисполнители (поле используется для фильтрации) | | | | + ||
|| AUDITORS | Наблюдатели (идентификаторы пользователей) | + | + | | ||
|| AUDITOR | Наблюдатели (поле используется для фильтрации) | | | | + ||
|| TAGS | Теги (при добавлении — просто массив тегов в виде текста).
`CTasks::GetList()` не возвращает поля тегов. `CTaskItem::getInstance()->getTags()` возвращает массив имен тегов | + | + | | ||
|| TAG | Теги (поле используется для фильтрации) | | | | + ||
|| ALLOW_CHANGE_DEADLINE| Флаг «Разрешить исполнителю (ответственному) менять крайний срок» | + | + | + | ||
|| TASK_CONTROL | Флаг «Принять работу после завершения задачи» | + | + | | ||
|| PARENT_ID | Идентификатор родительской задачи | + | + | | + ||
|| DEPENDS_ON | Идентификатор предыдущей задачи | + | + | | + ||
|| GROUP_ID | Идентификатор рабочей группы | + | + | + | + ||
|| RESPONSIBLE_ID | Идентификатор исполнителя | + | + | + | + ||
|| TIME_ESTIMATE | Плановые трудозатраты | + | + | + | + ||
|| ID | Идентификатор задачи. Уникален в рамках базы данных | + | | + | + ||
|| CREATED_BY | Идентификатор постановщика | + | + | + | + ||
|| DESCRIPTION_IN_BBCODE | Хранится ли описание задачи в BB-кодах | + | | | ||
|| DECLINE_REASON | Причина отклонения задачи | + | + | | ||
|| STATUS | Cтатус задачи | + | + | + | + ||
|| RESPONSIBLE_NAME | Имя исполнителя | + | | | + ||
|| RESPONSIBLE_LAST_NAME | Фамилия исполнителя | + | | | ||
|| RESPONSIBLE_SECOND_NAME | Отчество исполнителя | + | | | ||
|| DATE_START | Дата начала выполнения задачи | + | | + | + ||
|| DURATION_FACT | Затраченное время на задачу в минутах | + | | | ||
|| DURATION_PLAN | Планируемая длительность в часах или днях | + | + | | ||
|| DURATION_TYPE | Тип единицы измерения в планируемой длительности: days, hours или minutes | + | + | | ||
|| CREATED_BY_NAME | Имя постановщика | + | | | ||
|| CREATED_BY_LAST_NAME | Фамилия постановщика | + | | | ||
|| CREATED_BY_SECOND_NAME | Отчество постановщика | + | | | ||
|| CREATED_DATE | Дата создания задачи | + | + | + | + ||
|| CHANGED_BY | Пользователь, изменивший задачу в последний раз (идентификатор пользователя) | + | + | | + ||
|| CHANGED_DATE | Дата последнего изменения задачи | + | + | + | + ||
|| STATUS_CHANGED_BY | Пользователь, изменивший статус задачи (идентификатор пользователя) | + | + | | + ||
|| STATUS_CHANGED_DATE | Дата смены статуса | + | + | | ||
|| CLOSED_BY | Кем была завершена задача | + | | | ||
|| CLOSED_DATE | Дата завершения задачи | + | | + | + ||
|| GUID | Глобально-уникальный идентификатор | + | | | + ||
|| MARK | Оценка по задаче. Возможные значения: `P` (положительная) и `N` (отрицательная) | + | + | + | + ||
|| VIEWED_DATE | Дата последнего просмотра задачи в публичном интерфейсе текущим пользователем | + | | | ||
|| TIME_SPENT_IN_LOGS | Затраченное время на задачу в секундах | + | | | ||
|| FAVORITE | Присутствие в Избранном для текущего пользователя | + | | + | + ||
|| ALLOW_TIME_TRACKING | Включен ли учет затраченного времени по задаче | + | + | + | + ||
|| ADD_IN_REPORT | Включена ли задача в отчет по эффективности | + | + | | + ||
|| FORUM_ID | Идентификатор форума, в котором хранятся комментарии к задаче | + | | | ||
|| FORUM_TOPIC_ID | Идентификатор темы форума, в котором хранятся комментарии к задаче | + | | | + ||
|| COMMENTS_COUNT | Число комментариев к задаче | + | | | ||
|| SITE_ID | Идентификатор сайта. По умолчанию в это поле записывается идентификатор сайта, на котором создается задача | + | + | | + ||
|| SUBORDINATE | Является ли кто-то из участников задачи подчиненным текущего пользователя | + | | | ||
|| FORKED_BY_TEMPLATE_ID | Идентификатор шаблона, на основе которого была автоматически создана задача. Для некоторых старых задач может быть не установлен | + | | | ||
|| MULTITASK | Была ли задача создана для нескольких исполнителей | + | | | ||
|| ONLY_ROOT_TASKS | Поле, позволяющее выбирать только те задачи, у которых либо нет родительской задачи, либо есть, но к этой родительской задаче мы не имеем доступа | | | | + ||
|| MATCH_WORK_TIME | Должны ли даты исполнения и крайний срок всегда устанавливаться в рабочее время | + | + | + | + ||
|#

## Обзор методов

#|
|| **Метод** | **Описание** ||
|| [task.item.add](./task-item-add.md) | Создает новую задачу ||
|| [task.item.delete](./task-item-delete.md) | Удаляет задачу ||
|| [task.item.getdata](./task-item-get-data.md) | Возвращает массив данных о задаче ||
|| [task.item.getmanifest](./task-item-get-manifest.md) | Возвращает перечень методов `task.item.*` с их описанием ||
|| [task.item.list](./task-item-list.md) | Возвращает список задач ||
|| [task.item.update](./task-item-update.md) | Обновляет данные по задаче ||
|| [task.item.getdescription](./task-item-get-description.md) | Возвращает описание задачи ||
|| [task.item.getfiles](./task-item-get-files.md) | Возвращает массив с ссылками на файлы, прикрепленные к задаче ||
|| [task.item.getdependson](./task-item-get-dependson.md) | Возвращает массив с идентификаторами задач, от которых зависит задача ||
|| [task.item.getallowedactions](./task-item-get-allowed-actions.md) | Возвращает массив идентификаторов допустимых действий над задачей ||
|| [task.item.getallowedtaskactionsasstrings](./task-item-get-allowed-task-actions-as-strings.md) | Возвращает список допустимых действий над задачей ||
|| [task.item.isactionallowed](./task-item-is-action-allowed.md) | Проверяет, разрешено ли действие ||
|| [task.item.delegate](./task-item-delegate.md) | Делегирует задачу новому пользователю ||
|| [task.item.startexecution](./task-item-start-execution.md) | Переводит задачу в статус «выполняется» ||
|| [task.item.defer](./task-item-defer.md) | Переводит задачу в статус «отложена» ||
|| [task.item.complete](./task-item-complete.md) | Переводит задачу в статус «завершена» или «условно завершена (ждет контроля исполнителя)» ||
|| [task.item.renew](./task-item-renew.md) | Переводит задачу в статус «не выполняется» ||
|| [task.item.approve](./task-item-approve.md) | Переводит ожидающую контроля задачу в статус «завершена» ||
|| [task.item.disapprove](./task-item-disapprove.md) | Переводит ожидающую контроля задачу в статус «не выполняется» ||
|| [task.item.addtofavourite](./task-item-add-to-favourite.md) | Добавляет задачу в Избранное ||
|| [task.item.deletefromfavorite](./task-item-delete-from-favorite.md) | Удаляет задачу из Избранного ||
|| [task.item.addfile](./task-item-add-file.md) | Загружает файл в задачу ||
|| [task.item.deletefile](./task-item-delete-file.md) | Удаляет привязку файла к задаче ||
|| [task.logitem.list](./task-log-item-list.md) | Возвращает историю изменения задачи ||
|#

{% note info %}

Для получения тегов конкретной задачи необходимо передать параметр `/rest/task.item.gettags.xml?TASK_ID=3&auth=18tci5kga6v12g8okzm5r26sv0n9is84`. Запрос может быть как `ID`, так и `TASK_ID`. Принципиально, чтобы этот параметр был первым. В ответ вернется `{"result":["TAG1","TAG2","ETC..."]}`.

{% endnote %}