# На подключение чат-бота к чату ONIMBOTJOINCHAT

{% note warning "Мы еще обновляем эту страницу" %}

Тут может не хватать некоторых данных — дополним в ближайшее время

{% endnote %}{% if build == 'dev' %}

{% note alert "TO-DO _не выгружается на prod_" %}

- нужны правки под стандарт написания
- не указаны типы параметров
- не указана обязательность параметров
- таблицы параметров сгенерированы по примеру. Что такое [39] в примере??? BOT_ID? И как это записать в таблицу?

{% endnote %}

{% endif %}

> Scope: [`imbot`](../../../scopes/permissions.md)
>
> Кто может подписаться: любой пользователь

Событие `ONIMBOTJOINCHAT` на получение информации чат-ботом о включении его в чат (или личную переписку).

{% note warning %}

Описанные ниже поля - это содержимое поля [data] в событии. Данные авторизации в ключе [auth] содержат данные пользователя инициатора события, для получения данных авторизации бота, необходимо использовать [data][BOT][__BOT_CODE__].

{% endnote %}

#|
|| **Поле** | **Описание** | **Ревизия** ||
|| **BOT** 
[`unknown`](../../../data-types.md) | Массив кодов чат-ботов, которым предназначено событие | ||
|| **PARAMS** 
[`unknown`](../../../data-types.md) | Массив данных события | ||
|| **USER** 
[`unknown`](../../../data-types.md) | Массив данных пользователя, может быть пустым, если ID = 0 | ||
|#

## BOT / [39]???

#|
|| **Поле** | **Описание** | **Ревизия** ||
|| **AUTH** 
[`unknown`](../../../data-types.md) | Параметры для авторизации под чат-ботом для выполнения действий | ||
|| **BOT_ID** 
[`unknown`](../../../data-types.md) | Идентификатор чат-бота | ||
|| **BOT_CODE** 
[`unknown`](../../../data-types.md) | Код чат-бота | ||
|#

## PARAMS

#|
|| **Поле** | **Описание** | **Ревизия** ||
|| **DIALOG_ID** 
[`unknown`](../../../data-types.md) | Идентификатор диалога | ||
|| **BOT_ID** 
[`unknown`](../../../data-types.md) | Идентификатор бота | ||
|| **CHAT_TYPE** 
[`unknown`](../../../data-types.md) | Тип сообщения и чата
- **P** (чат один-на-один),
- **C** (с ограниченным количеством участников),
- **O** (публичный чат),
- **S** (чат-бот с повышенными привилегиями - supervisor) | ||
|| **CHAT_ENTITY_TYPE** 
[`unknown`](../../../data-types.md) | Подтип чата, может принимать значение LINES (Открытые линии) или пусто  | ||
|| **USER_ID** 
[`unknown`](../../../data-types.md) | Идентификатор пользователя (для чата один-на-один - открывавший чат-бота, для групповых чатов - пригласивший чат-бота) | ||
|| **LANGUAGE** 
[`unknown`](../../../data-types.md) | Идентификатор языка портала по умолчанию | ||
|#

## USER

#|
|| **Поле** | **Описание** | **Ревизия** ||
|| **ID** 
[`unknown`](../../../data-types.md) | Идентификатор пользователя | ||
|| **NAME** 
[`unknown`](../../../data-types.md) | Имя и фамилия пользователя | ||
|| **FIRST_NAME** 
[`unknown`](../../../data-types.md) | Имя пользователя | ||
|| **LAST_NAME** 
[`unknown`](../../../data-types.md) | Фамилия пользователя | ||
|| **WORK_POSITION** 
[`unknown`](../../../data-types.md) | Занимаемая должность | ||
|| **GENDER** 
[`unknown`](../../../data-types.md) | Пол, может быть либо M (мужской), либо F (женский) | ||
|#

## Примеры

{% list tabs %}

- JS

    ```js
    [BOT] => Array (
        [39] => Array (
            [AUTH] => Array (
                [domain] => b24.hazz
                [member_id] => d41d8cd98f00b204e9800998ecf8427e
                [application_token] => 8006ddd764e69deb28af0c768b10ed65
            )
            [BOT_ID] => 39    
            [BOT_CODE] => newbot
        )
    )
    [PARAMS] => Array (
        [DIALOG_ID] => 1
        [BOT_ID] => 39
        [CHAT_TYPE] => P
        [CHAT_ENTITY_TYPE] => 'LINES'
        [USER_ID] => 1
        [LANGUAGE] => ru
    )
    [USER] => Array (
        [ID] => 1
        [NAME] => Евгений Шеленков
        [FIRST_NAME] => Евгений
        [LAST_NAME] => Шеленков
        [WORK_POSITION] =>
        [GENDER] => M
    )
    ```

{% endlist %}

{% include [Сноска о примерах](../../../../_includes/examples.md) %}