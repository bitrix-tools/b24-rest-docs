# Управление карточками сделок: обзор методов 

Группа методов crm.deal.details.configuration.* управляет настройками карточки для двух представлений:

* «Общий вид» — вид карточки для всех сотрудников
* «Мой вид» — личная настройка карточки сотрудника

Для каждого вида карточки можно настроить секции, внутри секции — перечень полей. Например создать секцию «Информация об оплате» и вывести в ней поля «Сумма и валюта» и «Аванс». Для полей, которые не относятся к платежной информации, создать другую секцию.

> Быстрый переход: [все методы](#all-methods) 
> 
> Пользовательская документация: [Представления CRM](https://helpdesk.bitrix24.ru/open/17914816/)

## Связь карточки сделки с другими объектами

**Пользователь.** Идентификатор пользователя `userId` используется при установке личных настроек карточки. Получить идентификатор пользователя можно с помощью метода [user.get](../../../user/user-get.md).

**Поля сделки.** Идентификаторы полей используются при установке видимых полей в секции карточки. Получить идентификаторы системных и пользовательских полей сделки можно с помощью метода [crm.deal.fields](../crm-deal-fields.md). 

**Воронки сделок.** Для разных воронок сделок можно настраивать свой вид карточки. Для воронки «Продажи» создать вид карточки со одними секциями и полями. Для воронки «Сервисное обслуживание» — с другими. 

Для переключения между настройками карточек разных воронок используйте параметр `dealCategoryId` — ID воронки сделки.

Чтобы получить ID воронок сделок используйте метод [crm.category.list](../../universal/category/crm-category-list.md) с параметром `entityTypeId: 2`. 

## Универсальные методы для управления карточками

Наравне с методами crm.deal.details.configuration.* для настройки карточки сделки можно использовать группу универсальных методов [crm.item.details.configuration.*](../../universal/item-details-configuration/index.md). Возможности методов одинаковые, отличие может быть во времени выполнения запроса.

Универсальные методы [crm.item.details.configuration.*](../../universal/item-details-configuration/index.md) имеют дополнительный параметр `entityTypeId` — ID типа объекта. Параметр `entityTypeId` позволяет применять универсальные методы к любому объекту CRM. Для управления карточкой сделки через универсальный метод передавайте `entityTypeId: 2`. 

## Обзор методов {#all-methods}

> Scope: [`crm`](../../../scopes/permissions.md)
>
> Кто может выполнять методы: любой пользователь

#|
|| **Метод** | **Описание** ||
|| [crm.deal.details.configuration.get](./crm-deal-details-configuration-get.md) | Получает настройки карточки сделок ||
|| [crm.deal.details.configuration.reset](./crm-deal-details-configuration-reset.md) | Сбрасывает настроек карточки сделок ||
|| [crm.deal.details.configuration.set](./crm-deal-details-configuration-set.md) | Позволяет установить настройки карточки сделок ||
|| [crm.deal.details.configuration.forceCommonScopeForAll](./crm-deal-details-configuration-force-common-scope-for-all.md) | Принудительно устанавливает общую карточку сделок для всех пользователей ||
|#