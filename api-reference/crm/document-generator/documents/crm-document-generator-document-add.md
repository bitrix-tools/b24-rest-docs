# Создать новый документ crm.documentgenerator.document.add

{% note warning "Мы еще обновляем эту страницу" %}

Тут может не хватать некоторых данных — дополним в ближайшее время

{% endnote %}

{% if build == 'dev' %}

{% note alert "TO-DO _не выгружается на prod_" %}

- не указаны типы параметров
- не указана обязательность параметров
- отсутствуют примеры
- лучше добавить собственный ответ в случае успеха (не ссылкой)
- отсутствует ответ в случае ошибки

{% endnote %}

{% endif %}

> Scope: [`crm.documentgenerator`](../../../scopes/permissions.md)
>
> Кто может выполнять метод: любой пользователь

Метод `crm.documentgenerator.document.add` создаёт новый документ на основании шаблона и данных из соответствующей сущности. В `values` можно передать массив дополнительных значений полей. 

#|
|| **Параметр** | **Описание** ||
|| **templateId** | ID шаблона. ||
|| **entityTypeId** | ID типа сущности CRM. ||
|| **entityId** | ID сущности. ||
|| **values** | Дополнительные значения полей. ||
|| **stampsEnabled** | 1 (поставить), 0 (убрать) печати и подписи. ||
|#

## Ответ в случае успеха

В случае успешного выполнения в результате придёт структура, аналогичная методу [crm.documentgenerator.document.get()](./crm-document-generator-document-get.md) на новом документе.

### Почему в результате **crm.documentgenerator.document.add** нет ссылки на **pdf**

- Конвертация в **pdf** – операция асинхронная. На момент окончания генерации документа еще нет **pdf**-файла. Минимальное время конвертации – 8 секунд.
- Если для документа очень нужен **pdf**, то сейчас единственный вариант – сделать повторный запрос **crm.documentgenerator.document.get** через 20-30 секунд, чтобы считать ссылку на **pdf**. Если она там не появилась – попробовать повторить.

## Смотрите также

- [Примеры генерации документа](../../../document-generator/examples/index.md)
- [Презентация по генератору документов](https://dev.1c-bitrix.ru/upload/doc_gen_04_10_2019.pdf)
- [Шаблоны документов](https://helpdesk.bitrix24.ru/open/7622241/)