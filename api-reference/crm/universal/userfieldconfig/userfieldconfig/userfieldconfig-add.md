# Добавить новое пользовательское поле userfieldconfig.add

{% note warning "Мы еще обновляем эту страницу" %}

Тут может не хватать некоторых данных — дополним в ближайшее время

{% endnote %}

{% if build == 'dev' %}

{% note alert "TO-DO _не выгружается на prod_" %}

- не указана обязательность и типы параметров
- отсутствует ответ в случае успеха
- отсутствует ответ в случае ошибки
- нет примеров на др. языках
  
{% endnote %}

{% endif %}

> Scope: [`userfieldconfig, scope модуля`](../../../../scopes/permissions.md)
>
> Кто может выполнять метод: любой пользователь

## Описание

```http
userfieldconfig.add({moduleId: string, field: {}})
```

Метод добавит новое пользовательского поле.

## Параметры

#|
|| **Параметр** | **Описание** ||
|| **moduleId^*^** | Строковый идентификатор модуля. | ||
|| **field** | Список с полями настройки нового поля:

- [entityId^*^](../entity-id.md) - строковый идентификатор сущности. 
- fieldName^*^ - код поля. Должен быть сформирован по шаблону `UF_ + {идентификатор сущности} + _ + {произвольная строка в UPPER_CASE}`. Код поля не может быть больше 50 символов. 
- userTypeId^*^ - строковый идентификатор [типа поля](../userfieldconfig/userfieldconfig-get-types.md). 
- xmlId - внешний идентификатор.
- sort - индекс сортировки.
- multiple - флаг множественности (N или Y), по умолчанию N. Этот флаг можно указать только при создании поля.
- mandatory - флаг обязательности (N или Y), по умолчанию N.
- showFilter - флаг показа поля в фильтре (N или Y), по умолчанию N.
- showInList - флаг показа поля в списке (N или Y), по умолчанию Y.
- editInList - флаг разрешения редактирования поля в списке (N или Y), по умолчанию Y.
- isSearchable - флаг наличия значения поля [в полнотекстовом индексе](*ключ_индекс) (N или Y), по умолчанию N.
- settings - список с дополнительными настройками поля.
- editFormLabel - список с языкозависимыми названиями поля, где ключ - идентификатор языка, а значение - фраза.
- enum - массив с вариантами значений для свойств типа "список":
    - value^*^ - значение варианта
    - def - флаг значения по умолчанию (N или Y), по умолчанию N. Только один может быть вариантом по умолчанию
    - sort - индекс сортировки. Если не задан, генерируется автоматически на основе порядка передачи вариантов значений
    - xmlId - внешний идентификатор варианта | ||
|#

{% include [Сноска о параметрах](../../../../../_includes/required.md) %}

## Возвращаемое значение и пример

### Возвращаемое значение

Метод вернет такие же данные, как метод [userfieldconfig.get](userfieldconfig-get.md) на только что созданном поле.

### Примеры

Пример простого запроса. Этого запроса достаточно для создания поля типа "строка".

```json
{
    "moduleId": "rpa",
    "field": {
        "entityId": "RPA_1",
        "fieldName": "UF_RPA_1_NEW_REST_STRING",
        "userTypeId": "string",
    }
}
```

Создание поля типа "список"

```json
{
    "moduleId": "rpa",
    "field": {
        "entityId": "RPA_1",
        "fieldName": "UF_RPA_1_NEW_REST_STRING",
        "userTypeId": "enumeration"
    }
}
```

{% include [Сноска о примерах](../../../../../_includes/examples.md) %}


## Продолжите изучение

- [{#T}](../../../../../tutorials/crm/how-to-add-crm-objects/how-to-add-user-field-to-spa.md)
- [{#T}](../../../../../tutorials/crm/how-to-add-crm-objects/how-to-add-precision-to-user-field.md)

[*ключ_индекс]: Добавляйте в поиск только нужные поля. На построение индекса уходит время при изменении каждого значения поля, что может существенно замедлить работы при большом количестве таких полей.