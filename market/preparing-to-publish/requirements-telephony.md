# Интегрируйте свою телефонию или контакт-центр с Битрикс24

REST API для телефонии позволяет легко сделать вашу ВАТС или контакт-центр частью бизнес-сценариев для пользователей Битрикс24.

## Обязательные сценарии

Чтобы попасть на витрину [Битрикс24 Маркетплейс](https://www.bitrix24.ru/apps/?category=telephony), ваша интеграция должна поддерживать несколько обязательных пользовательских сценариев:

1. Входящий/исходящий звонок должен регистрироваться в Битрикс24 методом [telephony.externalcall.register](../../api-reference/telephony/telephony-external-call-register.md). Битрикс24 автоматически создаст нужные объекты в CRM: лид, контакт, сделку и т.д. Вам не нужно добавлять эти данные, Битрикс24 все сделает сам в результате регистрации звонка;
2. При регистрации входящего звонка нужно передавать в метод [telephony.externalcall.register](../../api-reference/telephony/telephony-external-call-register.md) номер входящей линии, на который пришел звонок, чтобы поддержать сквозную аналитику Битрикс24;
3. После успешного звонка нужно передавать запись разговора в Битрикс24 методом [telephony.externalCall.attachRecord](../../api-reference/telephony/telephony-external-call-attach-record.md); 
4. Нужно поддержать сценарий click2call, добавив обработчик события исходящего звонка [OnExternalCallStart](../../api-reference/telephony/events/on-external-call-start.md).
5. Нужно поддерживать сценарий заказа обратного звонка из CRM-форм Битрикс24, добавив обработчик события исходящего звонка [OnExternalCallBackStart](../../api-reference/telephony/events/on-external-call-back-start.md).

{% note info "" %}

Телефонии, поддерживающие все обязательные пользовательские сценарии, будут выделены в каталоге Битрикс24 Маркетплейс меткой "Рекомендуем".

{% endnote %}

## Рекомендуемые сценарии

Помимо обязательных сценариев интеграции с телефонией, пользователи Битрикс24 ждут от качественных решений дополнительные возможности:

1. Перенаправление звонка на ответственного менеджера. При входящем звонке интеграция может найти клиента в Битрикс24 по телефонному номеру, вызвав метод [telephony.externalCall.searchCrmEntities](../../api-reference/telephony/telephony-external-call-search-crm-entities.md). Метод вернет информацию о найденном клиенте, а также о сотруднике, который отвечает за клиента, чтобы вы могли направить звонок на этого сотрудника;
2. Управление показом стандартной карточки звонка при перенаправлении звонка. Если после регистрации звонка в Битрикс24 правила обработки очереди (dial-плана) вашей ВАТС требуют перевода голосового трафика на другого сотрудника, вы можете показывать карточку звонка этому сотруднику, вызвав метод [telephony.externalcall.show](../../api-reference/telephony/telephony-external-call-show.md). Одновременно, следует убрать карточку звонка у других сотрудников, вызвав метод [telephony.externalcall.hide](../../api-reference/telephony/telephony-external-call-hide.md).

## Проверка приложений модераторами

Перед публикацией вашей интеграции наши модераторы проверяют описанные выше ранее сценарии работы телефонии. Помимо этого, проверяется соответствие описаний карточки интеграции:

1. Описания и данные в карточки должны соответствовать [требованиям к публикации приложений в Битрикс24 Маркетплейс](./common-requirements.md);
2. Карточка должна содержать тарифную сетку предоставляемых услуг или ссылку на страницу цен;
3. Карточка должна содержать подробное описание функционала интеграции и инструкцию по ее настройке.

{% note info "" %}

Для ускорения проверки после подачи приложения на модерацию рекомендуется предоставлять модератору в чате доступы к личному кабинету АТС с привязанным внешним номером и несколькими внутренними.

{% endnote %}

## Продолжите изучение

- [{#T}](./common-requirements.md)
